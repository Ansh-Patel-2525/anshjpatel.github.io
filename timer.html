<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Timer - Ansh Patel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header class="game-header">
    <div class="game-header-content">
      <h1>‚è±Ô∏è Timer</h1>
      <div class="header-links">
        <a href="widgets.html" class="back-link">‚Üê Back to Widgets</a>
        <a href="index.html" class="back-link">üè† Home</a>
      </div>
    </div>
  </header>

  <main class="game-container">
    <div class="game-card">
      <div class="timer-container">
        <div class="timer-display" id="timerDisplay">00:00:00</div>
        <div class="timer-inputs">
          <input type="number" id="timerHours" min="0" max="23" placeholder="HH" class="timer-input">
          <span>:</span>
          <input type="number" id="timerMinutes" min="0" max="59" placeholder="MM" class="timer-input">
          <span>:</span>
          <input type="number" id="timerSeconds" min="0" max="59" placeholder="SS" class="timer-input">
        </div>
        <div class="timer-controls">
          <button onclick="startTimer()" class="widget-btn">Start</button>
          <button onclick="pauseTimer()" class="widget-btn-secondary">Pause</button>
          <button onclick="resetTimer()" class="widget-btn-secondary">Reset</button>
        </div>
        <div class="timer-presets">
          <button onclick="setTimer(0, 1, 0)" class="preset-btn">1 min</button>
          <button onclick="setTimer(0, 5, 0)" class="preset-btn">5 min</button>
          <button onclick="setTimer(0, 10, 0)" class="preset-btn">10 min</button>
          <button onclick="setTimer(0, 30, 0)" class="preset-btn">30 min</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    let timerState = {
      totalSeconds: 0,
      remainingSeconds: 0,
      interval: null,
      running: false
    };

    function setTimer(hours, minutes, seconds) {
      document.getElementById('timerHours').value = hours;
      document.getElementById('timerMinutes').value = minutes;
      document.getElementById('timerSeconds').value = seconds;
    }

    function startTimer() {
      if (timerState.running) return;
      
      if (timerState.remainingSeconds === 0) {
        const hours = parseInt(document.getElementById('timerHours').value) || 0;
        const minutes = parseInt(document.getElementById('timerMinutes').value) || 0;
        const seconds = parseInt(document.getElementById('timerSeconds').value) || 0;
        
        timerState.totalSeconds = hours * 3600 + minutes * 60 + seconds;
        timerState.remainingSeconds = timerState.totalSeconds;
      }
      
      if (timerState.remainingSeconds === 0) return;
      
      timerState.running = true;
      
      timerState.interval = setInterval(() => {
        timerState.remainingSeconds--;
        updateTimerDisplay();
        
        if (timerState.remainingSeconds <= 0) {
          pauseTimer();
          playTimerAlert();
        }
      }, 1000);
    }

    function pauseTimer() {
      clearInterval(timerState.interval);
      timerState.running = false;
    }

    function resetTimer() {
      pauseTimer();
      timerState.remainingSeconds = 0;
      document.getElementById('timerDisplay').textContent = '00:00:00';
      document.getElementById('timerHours').value = '';
      document.getElementById('timerMinutes').value = '';
      document.getElementById('timerSeconds').value = '';
    }

    function updateTimerDisplay() {
      const hours = Math.floor(timerState.remainingSeconds / 3600);
      const minutes = Math.floor((timerState.remainingSeconds % 3600) / 60);
      const seconds = timerState.remainingSeconds % 60;
      
      document.getElementById('timerDisplay').textContent = 
        `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    function playTimerAlert() {
      const display = document.getElementById('timerDisplay');
      display.style.color = '#10b981';
      display.style.transform = 'scale(1.1)';
      
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = 800;
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.5);
      
      setTimeout(() => {
        display.style.color = 'var(--primary)';
        display.style.transform = 'scale(1)';
      }, 1000);
    }
  </script>

</body>
</html>